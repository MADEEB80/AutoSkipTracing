<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>AutoSkipTracer</title><style>body{font-family:Arial,sans-serif;margin:0;padding:0}#Activation_Model{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.4);justify-content:center;align-items:center}#Activation_Form{background-color:#fff;margin:auto;padding:20px;border:1px solid #888;width:90%;max-width:500px;position:relative}#closeModal{position:absolute;right:15px;top:10px;font-size:28px;font-weight:700;cursor:pointer}.tabs{display:flex;justify-content:space-around;margin-bottom:20px;cursor:pointer}.tab{flex:1;text-align:center;padding:10px;border-bottom:2px solid #ccc}.tab.active{border-bottom:2px solid #4caf50;font-weight:700}.tab-content{display:block}.tab-pane{display:none}.form-group{margin-bottom:15px}.form-group label{display:block;margin-bottom:5px}.form-group input[type=email],.form-group input[type=number],.form-group input[type=password],.form-group input[type=text]{width:100%;padding:8px;box-sizing:border-box}.btn{padding:10px 20px;margin-right:10px;background-color:#4caf50;color:#fff;border:none;cursor:pointer}#snackbar{visibility:hidden;min-width:250px;background-color:#333;color:#fff;text-align:center;border-radius:2px;padding:16px;position:fixed;z-index:1001;left:50%;bottom:30px;transform:translateX(-50%)}#snackbar.show{visibility:visible;animation:fadein .5s,fadeout .5s 2.5s}@keyframes fadein{from{bottom:0;opacity:0}to{bottom:30px;opacity:1}}@keyframes fadeout{from{bottom:30px;opacity:1}to{bottom:0;opacity:0}}</style></head><body><button id="openForm">Open Payment</button><div id="snackbar"></div><div id="Activation_Model"><div id="Activation_Form"><span id="closeModal">&times;</span><div class="logo"><svg width="300" height="70" viewBox="0 0 300 70"><text x="150" y="35" fill="#4CAF50" font-size="24" font-weight="bold" text-anchor="middle">AutoSkipTracer</text><text x="150" y="60" fill="#4CAF50" font-size="24" font-weight="bold" text-anchor="middle">923036008080</text><path d="M110,25 Q150,10 190,25" stroke="#4CAF50" fill="none" stroke-width="2"/></svg></div><div class="tabs"><div class="tab" id="loginTab">Login</div><div class="tab" id="signupTab">Sign Up</div><div class="tab" id="paymentTab">Payment</div></div><div class="tab-content"><div class="tab-pane" id="loginContent"><form id="loginForm"><div class="form-group"><label for="email">Email</label> <input type="email" id="email" name="email" required></div><div class="form-group"><label for="password">Password</label> <input type="password" id="password" name="password" required></div><button type="submit" class="btn">Login</button> <button id="forget" class="btn" type="button">Forget password</button></form></div><div class="tab-pane" id="signupContent"><form id="signupForm"><div class="form-row"><div class="form-group"><label for="fullName">Full Name</label> <input type="text" id="fullName" name="fullName" pattern="\+?[A-Za-z ]{3,30}" required></div><div class="form-group"><label for="signupEmail">Email</label> <input type="email" id="signupEmail" name="signupEmail" required></div></div><div class="form-row"><div class="form-group"><label for="signupPassword">Password</label> <input type="password" id="signupPassword" name="signupPassword" required></div><div class="form-group"><label for="whatsapp">Whatsapp Number</label> <input type="text" id="whatsapp" name="whatsapp" pattern="\+?[0-9\s]{10,15}" title="Phone number should be 10-15 digits, with optional spaces and a leading +." required></div></div><div class="form-row"><div class="form-group"><label for="city">City</label> <input type="text" id="city" name="city" required></div><div class="form-group"><label for="reference">Reference</label> <input type="text" id="reference" name="reference"></div></div><button type="submit" class="btn">Sign Up</button></form></div><div class="tab-pane" id="paymentContent"><h2>Payment Details Form</h2><form id="uploadForm"><div class="form-group"><label for="userEmail">User Email:</label> <input id="userEmail" name="userEmail" readonly="readonly" required> <label for="userId">User ID:</label> <input id="userId" name="userId" readonly="readonly" required> <label for="paymentAmount">Amount:</label> <input type="number" id="paymentAmount" name="paymentAmount" min="50" required></div><div class="form-group"><label for="imageInput">Payment Screenshot:</label> <input type="file" name="image" id="imageInput" accept="image/*" required> <input type="hidden" name="ImgData" id="ImgData"></div><div class="form-group"><input type="submit" value="Upload" id="uploadBtn"></div></form></div></div></div></div><input type="hidden" id="version" value="1.0"><script>const API_URL="https://script.google.com/macros/s/AKfycbzboYL75oN9iFiKiKJrjYq9Rq0OKeHHyHF1UhdPUNcP9rHNllfCh1F3f4rUSersUhbAOg/exec",callApi=async(e,t={})=>{const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},o=await fetch(API_URL,{...n,...t});if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);return o.json()};function showAlert(e){const t=document.getElementById("snackbar");t.innerHTML=e,t.className="show",document.body.append(t),setTimeout((()=>{t.className=t.className.replace("show","")}),3e3)}const getStorage=e=>new Promise(((t,n)=>{chrome.storage.local.get(e,(e=>{if(chrome.runtime.lastError)return n(new Error(chrome.runtime.lastError.message));t(e)}))}));async function handleFormSubmission(e,t){try{const n=new FormData(e),o=Object.fromEntries(n.entries());o.action=t,console.log("Sending payload:",o);const a=await callApi(o);if(console.log("Response received:",a),"success"===a.status)if("login"===t){const{email:e="",password:t=""}=o,n=a.data.expirationDate||"";await chrome.storage.local.set({se:e,hi:t,ed:n}),console.log("Credentials stored in Chrome storage.");const l=a.data.currentLeads||"";l&&""!==l.trim()&&(document.getElementById("clickCount")&&(document.getElementById("clickCount").value=l),document.getElementById("TotalPayment")&&(document.getElementById("TotalPayment").value=(.1*l).toFixed(2))),document.getElementById("email").value="",document.getElementById("password").value="",document.getElementById("Activation_Model").style.display="none",showAlert("License validation completed.")}else alert(`${t.charAt(0).toUpperCase()+t.slice(1)} successful!`),activateTab("login");else alert(`Error: ${a.message}`)}catch(e){console.error("Error submitting form:",e),alert(`Error: ${e.message}`)}}document.getElementById("forget")?.addEventListener("click",(async()=>{const e=prompt("Please enter your email:");if(!e)return alert("Email is required to reset the password.");try{const t={action:"forget",email:e},n=await callApi(t);alert(n.message||"Check your inbox.")}catch(e){console.error("Error:",e),alert("An error occurred. Please check your network and try again.")}}));const forms={login:document.getElementById("loginForm"),signup:document.getElementById("signupForm")};async function showCurrentLeads(e,t){try{const n={action:"login",email:e,password:t,version:document.getElementById("version").value},o=await callApi(n);if("success"===o.status){let e=o.data.currentLeads||0;const t=o.data.messagesForHeader||"";if(chrome.storage.local.get({clickCount:0},(t=>{e+=t.clickCount,console.log("Updated currentLeads:",e),document.getElementById("clickCount")&&(document.getElementById("clickCount").value=e),document.getElementById("TotalPayment")&&(document.getElementById("TotalPayment").value=(.1*e).toFixed(2))})),""!==t.trim()){const e=document.createElement("h3");e.innerText=t;const n=document.querySelector("h1");n&&n.parentNode.replaceChild(e,n)}}else console.error("License validation failed")}catch(e){console.error("Error updating counts:",e)}}function loadSettings(){chrome.storage.local.get({email_total:5,phone_total:15,address_flag:0,age_flag:0,name_flag:0,Trim_Phone_flag:1,Search_flag:1,Sheet_Format:1,Searchby_flag:0,email_left_flag:0,email_type_flag:0,Data_Save_flag:0,showname_flag:1,openSecondName:0,TotalPayment:0,se:"autoskiptracer@gmail.com",hi:"",phoneMust:1,emailMust:!1,wirelessMust:!1,FindFNameinRelatives:!1,NextBySpace:!0,selectedWebsite:"truepeoplesearch"},(e=>{e.se&&e.hi&&showCurrentLeads(e.se,e.hi),Object.entries(e).forEach((([e,t])=>{const n=document.getElementById(e);n&&("checkbox"===n.type?n.checked=t:"radio"===n.type?n.checked=n.value===t:n.value=t)}));document.querySelectorAll('input[name="website"]').forEach((t=>{t.checked=t.value===e.selectedWebsite}));const t=e.se.trim().toLowerCase(),n=document.getElementById("Activation_Model");"autoskiptracer@gmail.com"===t?(n.style.display="block",console.log("Activation form is visible."),showModal("login")):console.log("Activation form not displayed.")}))}Object.keys(forms).forEach((e=>{const t=forms[e];t?.addEventListener("submit",(async n=>{n.preventDefault(),await handleFormSubmission(t,e)}))})),document.addEventListener("DOMContentLoaded",(async()=>{const e=document.getElementById("openForm");e?.addEventListener("click",(async()=>{try{const e=await getStorage(["se","hi"]);document.getElementById("userEmail").value=e.se||"",document.getElementById("userId").value=e.hi||""}catch(e){console.error("Error retrieving data:",e)}showModal("payment")}));const t=document.getElementById("imageInput"),n=document.getElementById("uploadBtn");t?.addEventListener("change",(function(){const e=this.files[0];if(e){const t=document.querySelector("input[name='ImgName']");t&&t.remove();const n=document.createElement("input");n.type="hidden",n.name="ImgName",n.value=e.name,document.getElementById("uploadForm").appendChild(n);const o=new FileReader;o.onload=e=>{const t=e.target.result.split("base64,")[1];document.getElementById("ImgData").value=t},o.readAsDataURL(e)}})),n?.addEventListener("click",(async e=>{e.preventDefault();const t=document.getElementById("uploadForm"),o=document.getElementById("version").value;let a=t.querySelector("input[name='Version']");if(a||(a=document.createElement("input"),a.type="hidden",a.name="Version",t.appendChild(a)),a.value=o,t.checkValidity()){n.value="Uploading...",n.disabled=!0;try{t.action="uploadImage";const e=await fetch(API_URL,{method:"POST",body:new FormData(t)}),n=await e.text();console.log("Upload successful:",n),alert("Upload completed successfully!"),document.getElementById("Activation_Model").style.display="none"}catch(e){console.error("Upload error:",e),alert("An error occurred during upload. Please try again.")}finally{n.value="Upload",n.disabled=!1}}else t.reportValidity()}))})),loadSettings(),chrome.runtime.onMessage.addListener(((e,t,n)=>{"showAlertMessage"===e.action&&showAlert("Please select a CSV file or load a previously loaded file.")}));const modalElements={activationModal:document.getElementById("Activation_Model"),closeModal:document.getElementById("closeModal"),loginTab:document.getElementById("loginTab"),signupTab:document.getElementById("signupTab"),paymentTab:document.getElementById("paymentTab"),loginContent:document.getElementById("loginContent"),signupContent:document.getElementById("signupContent"),paymentContent:document.getElementById("paymentContent"),loginEmailInput:document.getElementById("email"),signupEmailInput:document.getElementById("signupEmail")},activateTab=e=>{modalElements.loginTab.classList.remove("active"),modalElements.signupTab.classList.remove("active"),modalElements.paymentTab.classList.remove("active"),modalElements.loginContent.style.display="none",modalElements.signupContent.style.display="none",modalElements.paymentContent.style.display="none","login"===e?(modalElements.loginTab.classList.add("active"),modalElements.loginContent.style.display="block"):"signup"===e?(modalElements.signupTab.classList.add("active"),modalElements.signupContent.style.display="block"):"payment"===e&&(modalElements.paymentTab.classList.add("active"),modalElements.paymentContent.style.display="block")},showModal=async e=>{try{if("login"===e||"signup"===e){const t=await getEmail(),n="login"===e?modalElements.loginEmailInput:modalElements.signupEmailInput;n&&(n.value=t)}if("payment"===e)try{const e=await getStorage(["se","hi"]);document.getElementById("userEmail").value=e.se||"",document.getElementById("userId").value=e.hi||""}catch(e){console.error("Error retrieving payment data:",e)}modalElements.activationModal.style.display="flex",activateTab(e)}catch(e){console.error("Error in showModal:",e.message)}};modalElements.loginTab?.addEventListener("click",(()=>showModal("login"))),modalElements.signupTab?.addEventListener("click",(()=>showModal("signup"))),modalElements.paymentTab?.addEventListener("click",(()=>showModal("payment"))),modalElements.closeModal?.addEventListener("click",(()=>{modalElements.activationModal.style.display="none"})),window.addEventListener("click",(e=>{e.target===modalElements.activationModal&&(modalElements.activationModal.style.display="none")}));const getEmail=async()=>new Promise(((e,t)=>{if(!chrome?.identity?.getProfileUserInfo)return t("User info not available.");chrome.identity.getProfileUserInfo({accountStatus:"ANY"},(n=>{chrome.runtime.lastError?t(chrome.runtime.lastError):e(n.email)}))}));console.log("Event listeners set up.")</script></body></html>